{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://ethereum.org/schemas/execution_block_rlp_pectra_full.json",
  "title": "Ethereum Execution Layer Block (Post-Pectra, RLP-native, Full Transactions)",
  "type": "array",
  "description": "RLP-encoded execution block as nested lists, fully typed for header, transactions, uncles, and withdrawals",
  "items": [
    {
      "title": "Header",
      "type": "array",
      "description": "Block header fields as an RLP list",
      "items": [
        { "type": "string", "pattern": "^0x[a-fA-F0-9]{64}$" },        // parentHash
        { "type": "string", "pattern": "^0x[a-fA-F0-9]{64}$" },        // sha3Uncles
        { "type": "string", "pattern": "^0x[a-fA-F0-9]{40}$" },        // miner / feeRecipient
        { "type": "string", "pattern": "^0x[a-fA-F0-9]{64}$" },        // stateRoot
        { "type": "string", "pattern": "^0x[a-fA-F0-9]{64}$" },        // transactionsRoot
        { "type": "string", "pattern": "^0x[a-fA-F0-9]{64}$" },        // receiptsRoot
        { "type": "string", "pattern": "^0x[a-fA-F0-9]{512}$" },       // logsBloom
        { "type": "integer", "minimum": 0 },                            // difficulty
        { "type": "integer", "minimum": 0 },                            // number
        { "type": "integer", "minimum": 0 },                            // gasLimit
        { "type": "integer", "minimum": 0 },                            // gasUsed
        { "type": "integer", "minimum": 0 },                            // timestamp
        { "type": "string" },                                           // extraData
        { "type": "string", "pattern": "^0x[a-fA-F0-9]{64}$" },        // mixHash
        { "type": "string", "pattern": "^0x[a-fA-F0-9]{16}$" },        // nonce
        { "type": ["integer", "null"], "minimum": 0 },                  // baseFeePerGas
        { "type": ["string", "null"], "pattern": "^0x[a-fA-F0-9]{64}$" }, // withdrawalsRoot
        { "type": ["integer", "null"], "minimum": 0 },                  // blobGasUsed
        { "type": ["integer", "null"], "minimum": 0 },                  // excessBlobGas
        { "type": ["string", "null"], "pattern": "^0x[a-fA-F0-9]{64}$" }  // parentBeaconBlockRoot
      ]
    },
    {
      "title": "Transactions",
      "type": "array",
      "description": "Typed transactions (Legacy, EIP-1559, Blob, EIP-3074)",
      "items": {
        "oneOf": [
          {
            "title": "Legacy Transaction",
            "type": "array",
            "items": [
              { "type": "integer", "minimum": 0 },                   // nonce
              { "type": "integer", "minimum": 0 },                   // gasPrice
              { "type": "integer", "minimum": 0 },                   // gasLimit
              { "type": ["string", "null"], "pattern": "^0x[a-fA-F0-9]{40}$" }, // to
              { "type": "integer", "minimum": 0 },                   // value
              { "type": "string" },                                   // data
              { "type": "integer", "minimum": 0 },                   // v
              { "type": "string", "pattern": "^0x[a-fA-F0-9]{64}$" }, // r
              { "type": "string", "pattern": "^0x[a-fA-F0-9]{64}$" }  // s
            ]
          },
          {
            "title": "EIP-1559 Transaction",
            "type": "array",
            "items": [
              { "type": "integer", "minimum": 0 },                   // nonce
              { "type": "integer", "minimum": 0 },                   // maxPriorityFeePerGas
              { "type": "integer", "minimum": 0 },                   // maxFeePerGas
              { "type": "integer", "minimum": 0 },                   // gasLimit
              { "type": ["string", "null"], "pattern": "^0x[a-fA-F0-9]{40}$" }, // to
              { "type": "integer", "minimum": 0 },                   // value
              { "type": "string" },                                   // data
              { "type": "array", "items": {
                  "type": "array",
                  "items": [
                    { "type": "string", "pattern": "^0x[a-fA-F0-9]{40}$" }, // address
                    { "type": "array", "items": { "type": "integer", "minimum": 0 } } // storage keys
                  ]
                }},                                                 // accessList
              { "type": "integer", "minimum": 0 },                   // v
              { "type": "string", "pattern": "^0x[a-fA-F0-9]{64}$" }, // r
              { "type": "string", "pattern": "^0x[a-fA-F0-9]{64}$" }  // s
            ]
          },
          {
            "title": "Blob Transaction (EIP-4844)",
            "type": "array",
            "items": [
              { "type": "integer", "minimum": 0 },                   // nonce
              { "type": "integer", "minimum": 0 },                   // maxPriorityFeePerGas
              { "type": "integer", "minimum": 0 },                   // maxFeePerGas
              { "type": "integer", "minimum": 0 },                   // gasLimit
              { "type": ["string", "null"], "pattern": "^0x[a-fA-F0-9]{40}$" }, // to
              { "type": "integer", "minimum": 0 },                   // value
              { "type": "string" },                                   // data
              { "type": "array", "items": {
                  "type": "array",
                  "items": [
                    { "type": "string", "pattern": "^0x[a-fA-F0-9]{40}$" },
                    { "type": "array", "items": { "type": "integer", "minimum": 0 } }
                  ]
                }},                                                 // accessList
              { "type": "array", "items": { "type": "string" } },    // blobs
              { "type": "integer", "minimum": 0 },                   // v
              { "type": "string", "pattern": "^0x[a-fA-F0-9]{64}$" }, // r
              { "type": "string", "pattern": "^0x[a-fA-F0-9]{64}$" }  // s
            ]
          },
          {
            "title": "EIP-7702 / Pectra Smart Delegation Transaction",
            "type": "array",
            "items": [
              { "type": "integer", "minimum": 0 },                   // nonce
              { "type": "integer", "minimum": 0 },                   // gasPrice
              { "type": "integer", "minimum": 0 },                   // gasLimit
              { "type": ["string", "null"], "pattern": "^0x[a-fA-F0-9]{40}$" }, // to
              { "type": "integer", "minimum": 0 },                   // value
              { "type": "string" },                                   // data
              { "type": "array", "items": { "type": "array" } },      // delegated operations / calls
              { "type": "integer", "minimum": 0 },                   // v
              { "type": "string", "pattern": "^0x[a-fA-F0-9]{64}$" }, // r
              { "type": "string", "pattern": "^0x[a-fA-F0-9]{64}$" }  // s
            ]
          }
        ]
      }
    },
    {
      "title": "Uncles",
      "type": "array",
      "description": "List of uncle block headers",
      "items": {
        "type": "array",
        "items": [
          { "type": "string", "pattern": "^0x[a-fA-F0-9]{64}$" },   // parentHash
          { "type": "string", "pattern": "^0x[a-fA-F0-9]{64}$" },   // sha3Uncles
          { "type": "string", "pattern": "^0x[a-fA-F0-9]{40}$" },   // miner
          { "type": "string", "pattern": "^0x[a-fA-F0-9]{64}$" },   // stateRoot
          { "type": "string", "pattern": "^0x[a-fA-F0-9]{64}$" },   // transactionsRoot
          { "type": "string", "pattern": "^0x[a-fA-F0-9]{64}$" },   // receiptsRoot
          { "type": "string", "pattern": "^0x[a-fA-F0-9]{512}$" },  // logsBloom
          { "type": "integer", "minimum": 0 },                      // difficulty
          { "type": "integer", "minimum": 0 },                      // number
          { "type": "integer", "minimum": 0 },                      // gasLimit
          { "type": "integer", "minimum": 0 },                      // gasUsed
          { "type": "integer", "minimum": 0 },                      // timestamp
          { "type": "string" },                                     // extraData
          { "type": "string", "pattern": "^0x[a-fA-F0-9]{64}$" },   // mixHash
          { "type": "string", "pattern": "^0x[a-fA-F0-9]{16}$" },   // nonce
          { "type": ["integer", "null"], "minimum": 0 },            // baseFeePerGas
          { "type": ["string", "null"], "pattern": "^0x[a-fA-F0-9]{64}$" }, // withdrawalsRoot
          { "type": ["integer", "null"], "minimum": 0 },            // blobGasUsed
          { "type": ["integer", "null"], "minimum": 0 },            // excessBlobGas
          { "type": ["string", "null"], "pattern": "^0x[a-fA-F0-9]{64}$" }  // parentBeaconBlockRoot
        ]
      }
    },
    {
      "title": "Withdrawals",
      "type": "array",
      "description": "List of validator withdrawals (introduced Shanghai / Pectra enhancements)",
      "items": {
        "type": "array",
        "items": [
          { "type": "integer", "minimum": 0 },                      // index
          { "type": "integer", "minimum": 0 },                      // validatorIndex
          { "type": "string", "pattern": "^0x[a-fA-F0-9]{40}$" },   // address
          { "type": "integer", "minimum": 0 }                       // amount
        ]
      }
    }
  ]
}

